.. _Ressources:


***************
Ressources
***************

.. _input:

Input data
==========

+-----------------------------+-------------+-------------------------+----------------------+
| Variable                    | Short name  | Unit                    | Comment              |
+=============================+=============+=========================+======================+
| Air pressure                | PRES        | hPa                     |                      |
+-----------------------------+-------------+-------------------------+----------------------+
| Air temperature             | T2          | K                       |                      |
+-----------------------------+-------------+-------------------------+----------------------+
| Cloud cover                 | N           | -                       |                      |
+-----------------------------+-------------+-------------------------+----------------------+
| Relative humidity           | RH2         | %/100                   |                      |
+-----------------------------+-------------+-------------------------+----------------------+
| Solar radiation             | G           | W :math:`\text{m}^2`    |                      |
+-----------------------------+-------------+-------------------------+----------------------+
| Total precipitation         | RRR         | mm                      |                      |
+-----------------------------+-------------+-------------------------+----------------------+
| Wind speed                  | U2          | m :math:`\text{s}^{-1}` |                      |
+-----------------------------+-------------+-------------------------+----------------------+
| Snowfall                    | SNOWFALL    | m                       | optional             |
+-----------------------------+-------------+-------------------------+----------------------+
| Incoming longwave radiation | LWin        | W :math:`\text{m}^2`    | optional, replaces N |
+-----------------------------+-------------+-------------------------+----------------------+


.. _static:

Static fields
==============
     
+-----------------------------+-------------+------------------+----------------------+
| Variable                    | Short name  | Unit             | Comment              |
+=============================+=============+==================+======================+
| Glacier mask                | MASK        | Boolean          | True == glacier      |
+-----------------------------+-------------+------------------+----------------------+
| Elevation                   | HGT         | m                |                      |
+-----------------------------+-------------+------------------+----------------------+



.. _output:

Output data
===========

+------------------------------+-------------------------+---------------------------+----------------------+
| Variable                     | Short name              | Unit                      | Comment              |
+==============================+=========================+===========================+======================+
| Incoming shortwave radiation | SWin                    | W :math:`\text{m}^{-2}`   |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Outgoing shortwave radiation | SWout                   | W :math:`\text{m}^{-2}`   |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Liquid precipitation         | RAIN                    | mm                        | requires RRR         |
+------------------------------+-------------------------+---------------------------+----------------------+
| Snowfall                     | SNOWFALL                | mm                        |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Sensible heat flux           | H                       | W :math:`\text{m}^{-2}`   |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Latent heat flux             | LE                      | W :math:`\text{m}^{-2}`   |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Ground heat flux             | G                       | W :math:`\text{m}^{-2}`   |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Mass balance                 | MB                      | m w.e.                    |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Surface mass balance         | SMB                     | m w.e.                    |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Internal mass balance        | IMB                     | m w.e.                    |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Runoff                       | Q                       | m w.e.                    |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Snowheight                   | SNOWHEIGHT              | m                         |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Total height                 | TOTALHEIGHT             | m                         |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Surface temperature          | TS                      | K                         |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Albedo                       | ALBEDO                  | -                         |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Number of layers             | NLAYERS                 | -                         |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Available melt energy        | ME                      | W :math:`\text{m}^{-2}`   |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Evaporation                  | EVAPORATION             | m w.e.                    |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Condensation                 | CONDENSATION            | m w.e.                    |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Sublimation                  | SUBLIMATION             | m w.e.                    |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Deposition                   | DEPOSITION              | m w.e.                    |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Refreezing                   | REFREEZING              | m w.e.                    |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Subsurface melt              | subM                    | m w.e.                    |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Surface melt                 | surfM                   | m w.e.                    |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Aerodynamic roughness length | z0v                     | m                         |                      |
+------------------------------+-------------------------+---------------------------+----------------------+
| Snow layer Height            | LAYER_HEIGHT            | m                         | Profile              |
+------------------------------+-------------------------+---------------------------+----------------------+
| Temperature of snow layers   | LAYER_T                 | m                         | Profile              |
+------------------------------+-------------------------+---------------------------+----------------------+
| Snow density of layers       | LAYER_RHO               | kg :math:`\text{m}^{-3}i` | Profile              |
+------------------------------+-------------------------+---------------------------+----------------------+
| Ice fraction                 | LAYER_ICE_FRACTION      | -                         | Profile              |
+------------------------------+-------------------------+---------------------------+----------------------+
| Porosity                     | LAYER_POROSITY          | -                         | Profile              |
+------------------------------+-------------------------+---------------------------+----------------------+
| Liquid water content         | LAYER_LWC               | -                         | Profile              |
+------------------------------+-------------------------+---------------------------+----------------------+
| Irreducible water            | LAYER_IRREDUCIBLE_WATER | -                         | Profile              |
+------------------------------+-------------------------+---------------------------+----------------------+
| Liquid water in layers       | LAYER_LW                | m w.e.                    | Profile              |
+------------------------------+-------------------------+---------------------------+----------------------+
| Refreezing                   | LAYER_REFREEZE          | m w.e.                    | Profile              |
+------------------------------+-------------------------+---------------------------+----------------------+
| Cold content                 | LAYER_CC                | J :math:`\text{m}^{-2}`   | Profile              |
+------------------------------+-------------------------+---------------------------+----------------------+


.. _directories:

Directory structure
===================

+---------------------+------------------------------------+---------------------------------------------------------------+
| Directory           | File                               | Description                                                   |
+=====================+====================================+===============================================================+
| ./                  | COSIPY.py                          | Main program                                                  | 
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | config.py                          | Configuration file                                            |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | constants.py                       | Constants file                                                |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | cosipy.yaml                        | Cosipy logging configuration file                             |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | README.md                          | Readme file                                                   |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | slurm_config.py                    | SLURM Workload Manager configuration file                     |
+---------------------+------------------------------------+---------------------------------------------------------------+
| ./cpkernel          | cosipy_core.py                     | Solves the 1D simulations                                     |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | init.py                            | Initialisation of the snowpack                                |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | grid.py                            | GRID class                                                    |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | io.py                              | IO class                                                      |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | node.py                            | Node class                                                    |
+---------------------+------------------------------------+---------------------------------------------------------------+
| ./dask-worker-space |                                    | Folder needed for parallel computing and resulting log files  |
+---------------------+------------------------------------+---------------------------------------------------------------+
| ./data              | input/Zhadang_ERA5_2009_2018.csv   | Example meteo data (tutorial)                                 |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | input/Zhadang_ERA5_2009.nc         | Example cosipy input file (tutorial)                          |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | output/                            | Output files (automatically created)                          |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | restart/                           | Restart files (automatically created)                         |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | static/static.nc                   | Example cosipy static file (tutorial)                         |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | static/DEM/n30_e090_3arc_v2.tif    | Example dem file (tutorial)                                   |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | static/Shapefiles/Zhadang_RGI6.*   | Example rgi6 glacier outline (tutorial)                       |
+---------------------+------------------------------------+---------------------------------------------------------------+
| ./modules           | albedo.py                          | Albedo module                                                 |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | densification.py                   | Densification module                                          |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | heatEquation.py                    | Solves the heat equation                                      |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | penetratingRadiation.py            | Penetrating radiation module                                  |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | percolation.py                     | Percolation module                                            |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | radCor.py                          | Radiation module (used for preprocessing)                     |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | refreezing.py                      | Refreezing of water                                           |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | roughness.py                       | Roughness parametrisation                                     |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | surfaceTemperature.py              | Solves the surface energy balance / surface temperature       |
+---------------------+------------------------------------+---------------------------------------------------------------+
| ./postprocessing    | plot_cosipy_fields.py              | Quick visualisation of results                                |
+---------------------+------------------------------------+---------------------------------------------------------------+
| ./utilities         | aws2cosipy/aws2cosipy.py           | Creates a coispy input file from a data file                  |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | aws2cosipy/aws2cosipyConfig.py     | Configuration file for the utility aws_logger2cosipy          |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | createStatic/create_static_file.py | Utility to create the static input data                       |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | wrf2cosipy/wrf2cosipy.py           | Create an input file from WRF model output                    |
+---------------------+------------------------------------+---------------------------------------------------------------+
|                     | wrf2cosipy/config.py               | Configuration file for the utility wrf2cosipy                 |
+---------------------+------------------------------------+---------------------------------------------------------------+
